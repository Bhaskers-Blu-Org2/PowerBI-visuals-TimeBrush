!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("_"),require("d3"),require("jQuery"));else if("function"==typeof define&&define.amd)define(["_","d3","jQuery"],e);else{var i="object"==typeof exports?e(require("_"),require("d3"),require("jQuery")):e(t._,t.d3,t.jQuery);for(var r in i)("object"==typeof exports?exports:t)[r]=i[r]}}(this,function(t,e,i){return function(t){function e(r){if(i[r])return i[r].exports;var s=i[r]={exports:{},id:r,loaded:!1};return t[r].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";var r=i(1),s=i(4),n=i(2),a=i(3),h=1e3,o=100,u=function(){function t(t,e){this._dimensions={width:500,height:500},this._eventEmitter=new r["default"],this.element=t,this.x=a.time.scale(),this.y=a.scale.linear(),this.buildTimeScale(),this.dimensions?this.dimensions=e:this.resizeElements()}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t||[],this.x.domain(a.extent(this._data.map(function(t){return t.date}))),this.y.domain([0,a.max(this._data.map(function(t){return+t.value}))]),this.resizeElements()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){return this._eventEmitter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dimensions",{get:function(){return this._dimensions},set:function(t){s.extend(this._dimensions,t),this.resizeElements(),this._range&&(this.brush.extent(this._range),this.brush(a.select(this.element.find(".brush")[0])))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedRange",{set:function(t){function e(){var e=this;return t&&this._range||!t&&!this._range?t&&this._range?t.length!==this._range.length?!0:t.some(function(t,i){return t.getTime()!==e._range[i].getTime()}):!1:!0}function i(){this.brush.extent(t),this.brush(a.select(this.element.find(".brush")[0]))}e.bind(this)()&&(this._range=t,t&&t.length&&i.bind(this)())},enumerable:!0,configurable:!0}),t.prototype.buildTimeScale=function(){var t=this;this.svg=a.select(this.element[0]).append("svg"),this.clip=this.svg.append("defs").append("clipPath").attr("id","clip").append("rect"),this.context=this.svg.append("g").attr("class","context"),this.bars=this.context.append("g").attr("class","bars"),this.xAxis=this.context.append("g").attr("class","x axis");var e=n.debounce(function(){var e=t.brush.empty()?[]:t.brush.extent(),i=[];if(e&&e.length){var r,s;t.data.forEach(function(t){r||(r=t),s||(s=t),Math.abs(e[0].getTime()-t.date.getTime())<Math.abs(e[0].getTime()-r.date.getTime())&&(r=t),Math.abs(e[1].getTime()-t.date.getTime())<Math.abs(e[1].getTime()-s.date.getTime())&&(s=t)}),i=[r,s]}t.events.raiseEvent("rangeSelected",e,i)},h);this.brush=a.svg.brush().on("brush",e)},t.prototype.resizeElements=function(){var t=this,e={top:0,right:10,bottom:20,left:10},i=this._dimensions.width-e.left-e.right,r=this._dimensions.height-e.top-e.bottom;if(this.x.range([0,i]),this.y.range([r,0]),this.bars&&this._data){var s=this.bars.selectAll("rect").data(this._data);s.enter().append("rect"),s.attr("transform",function(e,i){var s=t.y(0)-t.y(e.value),n=t.x(e.date)||0;return"translate("+n+","+(r-s)+")"}).attr("width",2).attr("height",function(e){return Math.max(0,t.y(0)-t.y(e.value))}),s.exit().remove()}this.svg.attr("width",i+e.left+e.right).attr("height",r+e.top+e.bottom),this.clip.attr("width",i).attr("height",r),this.xAxis.attr("transform","translate(0,"+r+")").call(a.svg.axis().scale(this.x).orient("bottom").ticks(this.dimensions.width/o)),this.context.attr("transform","translate("+e.left+","+e.top+")"),this.brush.x(this.x),a.selectAll(this.element.find(".x.brush").toArray()).remove(),this.brushEle=this.context.append("g").attr("class","x brush").call(this.brush).selectAll("rect").attr("height",r+7).attr("y",-6),this.brushGrip=a.select(this.element.find(".x.brush")[0]).selectAll(".resize").append("rect").attr("x",-3).attr("rx",2).attr("ry",2).attr("y",r/2-15).attr("width",6).attr("fill","lightgray").attr("height",30)},t}();e.TimeBrush=u},function(t,e){"use strict";var i=function(){function t(){this.listeners={}}return t.prototype.on=function(t,e){var i=this,r=this.listeners[t]=this.listeners[t]||[];return r.push(e),{destroy:function(){i.off(t,e)}}},t.prototype.off=function(t,e){var i=this.listeners[t];if(i){var r=i.indexOf(e);r>=0&&i.splice(r,1)}},t.prototype.raiseEvent=function(t){for(var e=this,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];var s=this.listeners[t];s&&s.forEach(function(t){t.apply(e,i)})},t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(e,i){e.exports=t},function(t,i){t.exports=e},function(t,e){t.exports=i}])});